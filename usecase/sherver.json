{
    "vars": {
        "id": "sherver",
        "services": [ "attester", "sshd" ],
	"default_targets": [ "start-attester", "start-services" ],
        "client_global": false,
	"sshd_fqdn": "sherver.hcphacking.xyz",
	"sshd_port": 2222
    },
    "args_for": "sshd",

    "scope": [
        { "load": ".defaults", "path": "/usecase/proto_defaults.json" },
        { "vars": ".defaults" },
        { "import": ".", "source": "." },
        { "vars": ".vars" },
        { "loadunion": ".", "path": "/usecase/proto_root.json" },
        { "unionload": ".attester", "path": "/usecase/proto_attester.json" },
        { "load": ".client", "path": "/usecase/proto_client.json" },
        { "load": ".sshd", "path": "/usecase/proto_sshd.json" },
        { "load": ".tpm", "path": "/usecase/proto_tpm_sidecar.json" }
    ],

    "env": {
        "set": {
            "KRB5_KTNAME": "/etc/hcp/sherver/krb5.keytab",
            "KRB5_CONFIG": "/etc/hcp/sherver/krb5.conf"
        }
    },

    "attester": {
        "env": {
            "set": {
                "HCP_ATTESTCLIENT_HOOK_KRB5KEYTAB": "/hcp/sshd.py --hup"
            }
        }
    }
}
